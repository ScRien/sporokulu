<h1 class="mb-4">ðŸ“„ Makbuz YÃ¶netimi</h1>

<form method="GET" class="row g-3 mb-4">

  <div class="col-md-2">
    <label class="form-label">Ay</label>
    <select name="month" class="form-select">
      <option value="">TÃ¼mÃ¼</option>
      {{#each (range 1 12)}}
        <option value="{{this}}" {{#if (eq ../month this)}}selected{{/if}}>
          {{monthName this}}
        </option>
      {{/each}}
    </select>
  </div>

  <div class="col-md-2">
    <label class="form-label">YÄ±l</label>
    <input type="number" name="year" class="form-control" value="{{year}}" />
  </div>

  <div class="col-md-3">
    <label class="form-label">Ã–ÄŸrenci</label>
    <select name="student" class="form-select">
      <option value="all">TÃ¼mÃ¼</option>
      {{#each students}}
        <option value="{{this._id}}" {{#if (eq ../selectedStudent this._id)}}selected{{/if}}>
          {{this.name}}
        </option>
      {{/each}}
    </select>
  </div>

  <div class="col-md-2">
    <label class="form-label">Durum</label>
    <select name="status" class="form-select">
      <option value="all">TÃ¼mÃ¼</option>
      <option value="Ã¶dendi" {{#if (eq selectedStatus "Ã¶dendi")}}selected{{/if}}>Ã–dendi</option>
      <option value="bekliyor" {{#if (eq selectedStatus "bekliyor")}}selected{{/if}}>Bekliyor</option>
    </select>
  </div>

    <div class="col-md-3">
    <label class="form-label">Makbuz No</label>
    <input
        type="text"
        name="receipt"
        class="form-control"
        placeholder="Ã–rn: R-2025-0012"
        value="{{receipt}}"
    />
    </div>

  <div class="col-md-2 d-flex align-items-end">
    <button class="btn btn-primary">Filtrele</button>
  </div>

</form>

<table class="table table-bordered">
  <thead>
    <tr>
      <th>Makbuz No</th>
      <th>Ã–ÄŸrenci</th>
      <th>Ay/YÄ±l</th>
      <th>Tutar</th>
      <th>Durum</th>
      <th>Makbuz</th>
      <th>Detay</th>
    </tr>
  </thead>

  <tbody>
    {{#each payments}}
      <tr>
        <td>{{this.receiptNumber}}</td>
        <td>{{this.student.name}}</td>
        <td>{{this.month}} / {{this.year}}</td>
        <td>{{this.amount}} â‚º</td>

        <td>
          {{#if (eq this.status "Ã¶dendi")}}
            <span class="badge bg-success">Ã–dendi</span>
          {{else}}
            <span class="badge bg-warning text-dark">Bekliyor</span>
          {{/if}}
        </td>

        <td>
          {{#if this.receiptFile}}
            <a href="/receipts/{{this.receiptFile}}" target="_blank">ðŸ“„ PDF</a>
          {{else}} - {{/if}}
        </td>

        <td>
          <a class="btn btn-sm btn-info" href="/admin/payments/{{this._id}}">
            Detay
          </a>
        </td>
      </tr>
    {{/each}}
  </tbody>

</table>
